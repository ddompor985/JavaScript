<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Book Collection</title>
    <style>
        .highlight {
            background-color: lightblue; /* Changed highlight color */
        }
        body {
            font-family: Arial, sans-serif; /* Added a font style */
        }
    </style>
</head>
<body>
    <h1>My Book Collection</h1>

    <button onclick="displayGenres()">1. Genres</button>
    <button onclick="displayLongBooks()">2. Books with over 300 pages</button>
    <button onclick="displayOldBooks()">3. Books published over 2 years ago</button>
    <button onclick="displayAuthors()">4. Authors and their books</button>
    <button onclick="displayReadBooks()">5. Read books by publication date</button>

    <div id="output" style="margin-top: 20px"></div>

    <script>
        let bookList = [];

        // Load books from JSON file
        fetch("ListOfBooks.json")
            .then(response => response.json())
            .then(data => {
                bookList = data.books;
            })
            .catch(error => console.error("Failed to load JSON:", error));

        function displayGenres() {
            let uniqueGenres = [];
            for (const book of bookList) {
                if (!uniqueGenres.includes(book.genre)) {
                    uniqueGenres.push(book.genre);
                }
            }
            document.getElementById("output").innerHTML = `<strong>Genres:</strong> ${uniqueGenres.join(", ")}`;
        }

        function displayLongBooks() {
            const longBooks = bookList.filter(book => book.pages > 300);
            const titles = longBooks.map(book => `<span class="highlight">${book.title}</span>`).join(", ");
            document.getElementById("output").innerHTML = `<strong>Books with over 300 pages:</strong> ${titles}`;
        }

        function displayOldBooks() {
            const twoYearsAgo = new Date();
            twoYearsAgo.setFullYear(twoYearsAgo.getFullYear() - 2);
            const oldBooks = bookList.filter(book => new Date(book.published) < twoYearsAgo);
            const titles = oldBooks.map(book => `<span class="highlight">${book.title}</span>`).join(", ");
            document.getElementById("output").innerHTML = `<strong>Books published over 2 years ago:</strong> ${titles}`;
        }

        function displayAuthors() {
            const authorCount = {};
            bookList.forEach(book => 
                book.authors.forEach(author => {
                    authorCount[author] = (authorCount[author] || 0) + 1;
                })
            );
            const authorsInfo = Object.entries(authorCount)
                .map(([author, count]) => `${author}: ${count} book(s)`)
                .join("<br>");
            document.getElementById("output").innerHTML = `<strong>Authors and number of books:</strong><br>${authorsInfo}`;
        }

        function displayReadBooks() {
            const readBooks = bookList.filter(book => book.read)
                .sort((a, b) => new Date(a.published) - new Date(b.published));
            const titles = readBooks.map(book => `<span class="highlight">${book.title}</span>`).join(", ");
            document.getElementById("output").innerHTML = `<strong>Read books sorted by publication date:</strong> ${titles}`;
        }
    </script>
</body>
</html>
